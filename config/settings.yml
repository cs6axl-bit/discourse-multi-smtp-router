# config/settings.yml
plugins:
  # =========================
  # GLOBAL
  # =========================
  multi_smtp_router_enabled:
    default: false
    client: false

  multi_smtp_router_debug_log_enabled:
    default: false
    client: false

  multi_smtp_router_random_enabled:
    default: true
    client: false

  multi_smtp_router_weighted_enabled:
    default: false
    client: false

  multi_smtp_router_domain_override_enabled:
    default: true
    client: false

  # NEW: Route by per-domain metrics from Postgres table public.digest_provider_domain_metrics
  # If enabled, after domain override it will:
  # - look up domain in the metrics table
  # - rank by click_percent then open_percent
  # - choose randomly among top 50% providers
  # - if no row for that domain: random among all active providers
  multi_smtp_router_domain_metrics_enabled:
    default: false
    client: false

  # NEW: Per-process in-memory cache TTL for metrics lookups (seconds)
  # 25 minutes = 1500
  # 0 = disable cache (query Postgres each time)
  multi_smtp_router_domain_metrics_cache_ttl_seconds:
    default: 1500
    min: 0
    max: 3600
    client: false

  # List entries like:
  # gmail.com=provider_X
  # yahoo.com=provider_Y
  multi_smtp_router_domain_provider_pairs:
    type: list
    default: "gmail.com=provider_X|yahoo.com=provider_Y"
    client: false

  # External log (async)
  multi_smtp_router_log_to_endpoint_enabled:
    default: false
    client: false

  multi_smtp_router_log_endpoint_url:
    default: "http://172.17.0.1:8081/smtp_router_log.php"
    client: false

  multi_smtp_router_log_http_open_timeout:
    default: 2
    min: 0
    max: 60
    client: false

  multi_smtp_router_log_http_read_timeout:
    default: 3
    min: 0
    max: 60
    client: false

  # =========================
  # PROVIDER 1
  # =========================
  multi_smtp_router_p1_enabled:
    default: false
    client: false

  multi_smtp_router_p1_id:
    default: "provider_X"
    client: false

  multi_smtp_router_p1_weight_percent:
    default: 50
    min: 0
    max: 100
    client: false

  multi_smtp_router_p1_from_address:
    default: ""
    client: false

  multi_smtp_router_p1_reply_to_address:
    default: ""
    client: false

  multi_smtp_router_p1_smtp_address:
    default: ""
    client: false

  multi_smtp_router_p1_smtp_port:
    default: 587
    min: 0
    max: 65535
    client: false

  multi_smtp_router_p1_smtp_username:
    default: ""
    client: false

  multi_smtp_router_p1_smtp_password:
    default: ""
    secret: true
    client: false

  multi_smtp_router_p1_smtp_authentication_mode:
    default: "plain"
    client: false

  multi_smtp_router_p1_smtp_enable_starttls_auto:
    default: true
    client: false

  multi_smtp_router_p1_smtp_ssl:
    default: false
    client: false

  multi_smtp_router_p1_smtp_tls:
    default: false
    client: false

  multi_smtp_router_p1_smtp_domain:
    default: ""
    client: false

  # =========================
  # PROVIDER 2
  # =========================
  multi_smtp_router_p2_enabled:
    default: false
    client: false

  multi_smtp_router_p2_id:
    default: "provider_Y"
    client: false

  multi_smtp_router_p2_weight_percent:
    default: 50
    min: 0
    max: 100
    client: false

  multi_smtp_router_p2_from_address:
    default: ""
    client: false

  multi_smtp_router_p2_reply_to_address:
    default: ""
    client: false

  multi_smtp_router_p2_smtp_address:
    default: ""
    client: false

  multi_smtp_router_p2_smtp_port:
    default: 587
    min: 0
    max: 65535
    client: false

  multi_smtp_router_p2_smtp_username:
    default: ""
    client: false

  multi_smtp_router_p2_smtp_password:
    default: ""
    secret: true
    client: false

  multi_smtp_router_p2_smtp_authentication_mode:
    default: "plain"
    client: false

  multi_smtp_router_p2_smtp_enable_starttls_auto:
    default: true
    client: false

  multi_smtp_router_p2_smtp_ssl:
    default: false
    client: false

  multi_smtp_router_p2_smtp_tls:
    default: false
    client: false

  multi_smtp_router_p2_smtp_domain:
    default: ""
    client: false

  # =========================
  # PROVIDER 3
  # =========================
  multi_smtp_router_p3_enabled:
    default: false
    client: false

  multi_smtp_router_p3_id:
    default: "provider_A"
    client: false

  multi_smtp_router_p3_weight_percent:
    default: 0
    min: 0
    max: 100
    client: false

  multi_smtp_router_p3_from_address:
    default: ""
    client: false

  multi_smtp_router_p3_reply_to_address:
    default: ""
    client: false

  multi_smtp_router_p3_smtp_address:
    default: ""
    client: false

  multi_smtp_router_p3_smtp_port:
    default: 587
    min: 0
    max: 65535
    client: false

  multi_smtp_router_p3_smtp_username:
    default: ""
    client: false

  multi_smtp_router_p3_smtp_password:
    default: ""
    secret: true
    client: false

  multi_smtp_router_p3_smtp_authentication_mode:
    default: "plain"
    client: false

  multi_smtp_router_p3_smtp_enable_starttls_auto:
    default: true
    client: false

  multi_smtp_router_p3_smtp_ssl:
    default: false
    client: false

  multi_smtp_router_p3_smtp_tls:
    default: false
    client: false

  multi_smtp_router_p3_smtp_domain:
    default: ""
    client: false

  # =========================
  # PROVIDER 4
  # =========================
  multi_smtp_router_p4_enabled:
    default: false
    client: false

  multi_smtp_router_p4_id:
    default: "provider_B"
    client: false

  multi_smtp_router_p4_weight_percent:
    default: 0
    min: 0
    max: 100
    client: false

  multi_smtp_router_p4_from_address:
    default: ""
    client: false

  multi_smtp_router_p4_reply_to_address:
    default: ""
    client: false

  multi_smtp_router_p4_smtp_address:
    default: ""
    client: false

  multi_smtp_router_p4_smtp_port:
    default: 587
    min: 0
    max: 65535
    client: false

  multi_smtp_router_p4_smtp_username:
    default: ""
    client: false

  multi_smtp_router_p4_smtp_password:
    default: ""
    secret: true
    client: false

  multi_smtp_router_p4_smtp_authentication_mode:
    default: "plain"
    client: false

  multi_smtp_router_p4_smtp_enable_starttls_auto:
    default: true
    client: false

  multi_smtp_router_p4_smtp_ssl:
    default: false
    client: false

  multi_smtp_router_p4_smtp_tls:
    default: false
    client: false

  multi_smtp_router_p4_smtp_domain:
    default: ""
    client: false

  # =========================
  # PROVIDER 5
  # =========================
  multi_smtp_router_p5_enabled:
    default: false
    client: false

  multi_smtp_router_p5_id:
    default: "provider_C"
    client: false

  multi_smtp_router_p5_weight_percent:
    default: 0
    min: 0
    max: 100
    client: false

  multi_smtp_router_p5_from_address:
    default: ""
    client: false

  multi_smtp_router_p5_reply_to_address:
    default: ""
    client: false

  multi_smtp_router_p5_smtp_address:
    default: ""
    client: false

  multi_smtp_router_p5_smtp_port:
    default: 587
    min: 0
    max: 65535
    client: false

  multi_smtp_router_p5_smtp_username:
    default: ""
    client: false

  multi_smtp_router_p5_smtp_password:
    default: ""
    secret: true
    client: false

  multi_smtp_router_p5_smtp_authentication_mode:
    default: "plain"
    client: false

  multi_smtp_router_p5_smtp_enable_starttls_auto:
    default: true
    client: false

  multi_smtp_router_p5_smtp_ssl:
    default: false
    client: false

  multi_smtp_router_p5_smtp_tls:
    default: false
    client: false

  multi_smtp_router_p5_smtp_domain:
    default: ""
    client: false

  # =========================
  # PROVIDER 6
  # =========================
  multi_smtp_router_p6_enabled:
    default: false
    client: false

  multi_smtp_router_p6_id:
    default: "provider_D"
    client: false

  multi_smtp_router_p6_weight_percent:
    default: 0
    min: 0
    max: 100
    client: false

  multi_smtp_router_p6_from_address:
    default: ""
    client: false

  multi_smtp_router_p6_reply_to_address:
    default: ""
    client: false

  multi_smtp_router_p6_smtp_address:
    default: ""
    client: false

  multi_smtp_router_p6_smtp_port:
    default: 587
    min: 0
    max: 65535
    client: false

  multi_smtp_router_p6_smtp_username:
    default: ""
    client: false

  multi_smtp_router_p6_smtp_password:
    default: ""
    secret: true
    client: false

  multi_smtp_router_p6_smtp_authentication_mode:
    default: "plain"
    client: false

  multi_smtp_router_p6_smtp_enable_starttls_auto:
    default: true
    client: false

  multi_smtp_router_p6_smtp_ssl:
    default: false
    client: false

  multi_smtp_router_p6_smtp_tls:
    default: false
    client: false

  multi_smtp_router_p6_smtp_domain:
    default: ""
    client: false
